<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>New Fixed Asset </title>
        <h:outputStylesheet library="css" name="ComSettingNew.css" />
    </h:head>
    <h:body>
        <h:form id="fixedAssetForm">
            <p:growl id="growl" showDetail="true" life="3000" sticky="true"/>
            <h1>New Fixed Asset </h1>
            <h:panelGrid columns="3"
                         columnClasses="firstColumnPGrid,secondColumnPGrid,thirdColumnPGrid"
                         style="margin-left: 10px;">

             <h:panelGroup layout="block" style="display: flex; align-items: center; gap: 20px; margin-left: 10px;">
                <p:outputLabel for="AssetSearch" value="Asset Search:" style="width: 100px"/>
                <p:inputText id="AssetSearch" styleClass="GenInputTxt" 
                             style="margin-right: 10px; "
                             maxlength="50" size="30" value="#{authNewFixedAsset.newAccSearch}"
                             placeholder="Search by category or  asset name">
                    <p:ajax event="keyup" listener="#{authNewFixedAsset.searchAccount}"
                            update="authorizedFixedAsset" />
                </p:inputText>


                <p:commandButton  icon="pi pi-eye" disabled="false" 
                                  actionListener="#{authNewFixedAsset.searchAccount}" 
                                  process="@this" update="authorizedFixedAsset"/>
             </h:panelGroup>
                
                <p:outputLabel/>
                
                <h:panelGroup layout="block" style="display: flex; align-items: center; gap: 20px; margin-left: 10px;">
                    <p:selectOneMenu id="searchByCategory" style="margin-right: 10px;" styleClass="GenSELTxtreq" value="#{authNewFixedAsset.newAccSearch}"  >
                    <f:selectItem itemLabel="Select Category" itemValue=""/>
                    <f:selectItems value="#{authNewFixedAsset.categories}" />
                    <p:ajax  update="authorizedFixedAsset" listener="#{authNewFixedAsset.searchAccount()}" />
                </p:selectOneMenu>

                <p:selectOneMenu id="branch" style="margin-right: 10px;" styleClass="GenSELTxtreq" value="#{newFixedAsset.branch}"  >
                    <f:selectItem itemLabel="Select Branch" itemValue=""/>
                    <f:selectItems value="#{authNewFixedAsset.branches}" />
                    <p:ajax  update="authorizedFixedAsset" listener="#{authNewFixedAsset.onSelectBranch}" />
                </p:selectOneMenu>

                    </h:panelGroup>
            </h:panelGrid>

            <br/>
                <p:dataTable id="authorizedFixedAsset"
                             value="#{authNewFixedAsset.lazyFixedAssetModel}"
                             var="account"
                             scrollable="true" 
                             scrollHeight="500"
                             lazy="true"
                             rowIndexVar="r" 
                             rowStyleClass="#{r % 2 == 0 ? 'evenClass' : 'oddClass'}"
                             resizableColumns="true" 
                             widgetVar="unauthorizedAccountsTable"
                             scrollRows="20"
                             liveScroll="true"
                             showGridlines="true"
                             styleClass="myLDRepay">



                    <!-- Serial Number Column -->
                    <p:column headerText="S/N" style="font-size: 10pt; text-align: center;" width="50">
                        <h:outputText value="#{r + 1}" />
                    </p:column>

                    <!-- Category (Required) -->
                    <p:column headerText="Category" style="font-size: 10pt;">
                        <h:outputText value="#{account.FAPcategory}" />
                    </p:column>

                    <!-- Category ID -->
                    <p:column headerText="Category ID" style="font-size: 10pt;">
                        <h:outputText value="#{account.FAPcatID}" />
                    </p:column>

                    <!-- Assets Name (Required) -->
                    <p:column headerText="Assets Name" style="font-size: 10pt;">
                        <h:outputText value="#{account.assetName}" />
                    </p:column>

                    <!-- Assets Amount (Required) -->
                    <p:column headerText="Assets Amount" style="font-size: 10pt; text-align: right;">
                        <h:outputText value="#{account.assetAmount}">
                            <f:convertNumber type="currency" currencySymbol="â‚¦" />
                        </h:outputText>
                    </p:column>

                    <!-- Duration in Months (Required) -->
                    <p:column headerText="Duration (Months)" style="font-size: 10pt; text-align: center;">
                        <h:outputText value="#{account.durationsMonth}" />
                    </p:column>

                    <!-- Purchase  Date(Required) -->
                    <p:column headerText="Purchased Date" style="font-size: 10pt;">
                        <h:outputText value="#{account.purchasedDate}">
                            <f:convertDateTime pattern="dd-MM-yyyy" />
                        </h:outputText>
                    </p:column>

                    <!-- Branch -->
                    <p:column headerText="Branch" style="font-size: 10pt;">
                        <h:outputText value="#{account.branch}" />
                    </p:column>

                    <p:column headerText="Actions" style="text-align:center;" width="100" exportable="false">
                        <p:commandButton  icon="pi pi-pencil"
                                          action="#{authNewFixedAsset.goToEditPage(account)}"
                                          update="@none"
                                          ajax="false" />
                    </p:column>
                    
                    <f:facet name="footer">
                    <p:commandButton value="Export as csv" icon="pi pi-download" ajax="false" >
                        <p:dataExporter type="csv" target="authorizedFixedAsset" fileName="Authorized Fixed Asset"/>
                    </p:commandButton> 
                </f:facet>
                </p:dataTable>

        
        </h:form>
    </h:body>
</html>
